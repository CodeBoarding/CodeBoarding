{
  "description": "The `AI Orchestration Layer` acts as the central intelligence of the system, orchestrating the entire AI-driven code analysis workflow. It encompasses the core logic for driving the analysis pipeline, from prompt generation and LLM interaction to response interpretation and structured insight generation, serving as the central control for architectural analysis.",
  "components": [
    {
      "name": "AI Orchestration Agent",
      "description": "Acts as the central intelligence, orchestrating the analysis pipeline. It invokes Large Language Models (LLMs), handles retries for robust operation, parses complex LLM responses, classifies files into architectural components, and integrates with various static analysis tools (e.g., for reading CFG, file content, or method invocations). It drives the generation of architectural insights.",
      "key_entities": [
        {
          "qualified_name": "CodeBoardingAgent",
          "reference_file": "agents/agent.py",
          "reference_start_line": 44,
          "reference_end_line": 497
        }
      ],
      "assigned_files": [
        "agents/agent.py"
      ],
      "source_cluster_ids": [],
      "can_expand": true
    },
    {
      "name": "Analysis Data Models",
      "description": "Defines standardized data structures (e.g., `AnalysisInsights`, `CFGComponent`, `FileClassification`, `ValidationInsights`) used for representing all inputs and outputs within the AI analysis process. These models ensure structured communication and consistent data exchange between different parts of the agent and for external consumption.",
      "key_entities": [
        {
          "qualified_name": "agents.agent_responses",
          "reference_file": "agents/agent_responses.py",
          "reference_start_line": null,
          "reference_end_line": null
        }
      ],
      "assigned_files": [
        "agents/agent_responses.py"
      ],
      "source_cluster_ids": [],
      "can_expand": true
    },
    {
      "name": "Abstract Prompt Factory",
      "description": "Provides a centralized and abstracted mechanism for creating and retrieving LLM prompts. It manages the selection of appropriate prompt templates based on the target LLM and the specific analysis task, ensuring consistency and reusability of prompts across the system.",
      "key_entities": [
        {
          "qualified_name": "PromptFactory",
          "reference_file": "agents/prompts/abstract_prompt_factory.py",
          "reference_start_line": 10,
          "reference_end_line": 63
        }
      ],
      "assigned_files": [
        "agents/prompts/abstract_prompt_factory.py",
        "agents/prompts/prompt_factory.py"
      ],
      "source_cluster_ids": [],
      "can_expand": true
    },
    {
      "name": "LLM-Specific Prompt Generators",
      "description": "Implement the concrete logic for constructing prompts that are specifically optimized for a particular Large Language Model (e.g., Gemini Flash, Claude, GPT). They encapsulate the unique prompt engineering techniques and message formats required by each LLM to achieve optimal analysis results.",
      "key_entities": [
        {
          "qualified_name": "GeminiFlashPromptFactory",
          "reference_file": "agents/prompts/gemini_flash_prompts.py",
          "reference_start_line": 298,
          "reference_end_line": 347
        }
      ],
      "assigned_files": [
        "agents/prompts/gemini_flash_prompts.py",
        "agents/prompts/claude_prompts.py",
        "agents/prompts/gpt_prompts.py"
      ],
      "source_cluster_ids": [],
      "can_expand": true
    },
    {
      "name": "Prompt Provider Interface",
      "description": "Defines a standardized contract and common interface for all LLM prompt providers. This ensures that new LLM integrations can be added seamlessly by adhering to a consistent set of prompt generation methods, promoting modularity and extensibility within the prompt management system.",
      "key_entities": [
        {
          "qualified_name": "PromptProviderInterface",
          "reference_file": "agents/prompts/abstract_prompt_factory.py",
          "reference_start_line": null,
          "reference_end_line": null
        }
      ],
      "assigned_files": [
        "agents/prompts/abstract_prompt_factory.py"
      ],
      "source_cluster_ids": [],
      "can_expand": true
    }
  ],
  "components_relations": [
    {
      "relation": "requests specific prompts from",
      "src_name": "AI Orchestration Agent",
      "dst_name": "Abstract Prompt Factory"
    },
    {
      "relation": "supplies configured prompts to",
      "src_name": "Abstract Prompt Factory",
      "dst_name": "AI Orchestration Agent"
    },
    {
      "relation": "populates with processed information",
      "src_name": "AI Orchestration Agent",
      "dst_name": "Analysis Data Models"
    },
    {
      "relation": "consumes for internal processing and state management",
      "src_name": "AI Orchestration Agent",
      "dst_name": "Analysis Data Models"
    },
    {
      "relation": "delegates prompt construction to",
      "src_name": "Abstract Prompt Factory",
      "dst_name": "LLM-Specific Prompt Generators"
    },
    {
      "relation": "provide concrete prompt implementations to",
      "src_name": "LLM-Specific Prompt Generators",
      "dst_name": "Abstract Prompt Factory"
    },
    {
      "relation": "utilizes for consistent prompt management",
      "src_name": "Abstract Prompt Factory",
      "dst_name": "Prompt Provider Interface"
    },
    {
      "relation": "adhere to the contract",
      "src_name": "LLM-Specific Prompt Generators",
      "dst_name": "Prompt Provider Interface"
    }
  ]
}
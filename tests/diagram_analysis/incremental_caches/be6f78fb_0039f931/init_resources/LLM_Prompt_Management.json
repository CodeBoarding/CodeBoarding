{
  "description": "The LLM & Prompt Management subsystem configures Large Language Models and generates provider- and interaction-mode-specific prompts. The main flow: determine active LLM via configuration, select or instantiate the appropriate concrete prompt factory (implementing a shared abstract interface), and delegate prompt generation requests to that concrete factory so external modules receive consistent prompt outputs regardless of LLM provider or interaction style. Purpose: centralize LLM settings and encapsulate prompt-generation differences across providers, enabling extensibility and consistent usage.",
  "components": [
    {
      "name": "PromptFactory",
      "description": "Central entry point for prompt generation; selects and orchestrates concrete prompt factories based on LLM configuration.",
      "key_entities": [
        {
          "qualified_name": "agents.prompts.abstract_prompt_factory.PromptFactory",
          "reference_file": "agents/prompts/abstract_prompt_factory.py",
          "reference_start_line": null,
          "reference_end_line": null
        }
      ],
      "assigned_files": [
        "agents/prompts/abstract_prompt_factory.py",
        "agents/prompts/__init__.py",
        "agents/prompts/prompt_factory.py"
      ],
      "source_cluster_ids": [],
      "can_expand": true
    },
    {
      "name": "AbstractPromptFactory",
      "description": "Defines the interface/contract for concrete prompt factories. Specifies methods for generating system messages, CFG details, classification messages, etc.",
      "key_entities": [
        {
          "qualified_name": "agents.prompts.abstract_prompt_factory.AbstractPromptFactory",
          "reference_file": "agents/prompts/abstract_prompt_factory.py",
          "reference_start_line": null,
          "reference_end_line": null
        }
      ],
      "assigned_files": [
        "agents/prompts/abstract_prompt_factory.py"
      ],
      "source_cluster_ids": [],
      "can_expand": true
    },
    {
      "name": "LLMConfiguration",
      "description": "Manages provider-specific configuration (API keys, model names, client params) and provides the LLM context used for factory selection and prompt generation.",
      "key_entities": [
        {
          "qualified_name": "agents.prompts.abstract_prompt_factory.LLMConfiguration",
          "reference_file": "agents/prompts/abstract_prompt_factory.py",
          "reference_start_line": null,
          "reference_end_line": null
        }
      ],
      "assigned_files": [
        "agents/prompts/abstract_prompt_factory.py",
        "agents/llm_config.py"
      ],
      "source_cluster_ids": [],
      "can_expand": true
    },
    {
      "name": "ClaudeBidirectionalPromptFactory",
      "description": "Concrete implementation of AbstractPromptFactory for Claude LLMs, optimized for bidirectional interaction patterns.",
      "key_entities": [
        {
          "qualified_name": "agents.prompts.claude_prompts_bidirectional.ClaudeBidirectionalPromptFactory",
          "reference_file": "agents/prompts/claude_prompts_bidirectional.py",
          "reference_start_line": 382,
          "reference_end_line": 446
        }
      ],
      "assigned_files": [
        "agents/prompts/claude_prompts_bidirectional.py"
      ],
      "source_cluster_ids": [],
      "can_expand": true
    },
    {
      "name": "GPTUnidirectionalPromptFactory",
      "description": "Concrete implementation of AbstractPromptFactory for GPT LLMs, focused on unidirectional interaction patterns.",
      "key_entities": [],
      "assigned_files": [
        "agents/prompts/gpt_prompts_unidirectional.py"
      ],
      "source_cluster_ids": [],
      "can_expand": true
    },
    {
      "name": "ConcretePromptFactory (Conceptual Grouping)",
      "description": "Collective set of other concrete AbstractPromptFactory implementations for various LLM providers and interaction modes (e.g., Gemini bidirectional/unidirectional).",
      "key_entities": [],
      "assigned_files": [
        "agents/prompts/claude_prompts_unidirectional.py",
        "agents/prompts/gemini_flash_prompts_bidirectional.py",
        "agents/prompts/gemini_flash_prompts_unidirectional.py",
        "agents/prompts/gpt_prompts_bidirectional.py"
      ],
      "source_cluster_ids": [],
      "can_expand": true
    }
  ],
  "components_relations": [
    {
      "relation": "queries/provides context to",
      "src_name": "PromptFactory",
      "dst_name": "LLMConfiguration"
    },
    {
      "relation": "instantiates",
      "src_name": "PromptFactory",
      "dst_name": "AbstractPromptFactory (concrete implementations)"
    },
    {
      "relation": "implements",
      "src_name": "ClaudeBidirectionalPromptFactory",
      "dst_name": "AbstractPromptFactory"
    },
    {
      "relation": "implements",
      "src_name": "GPTUnidirectionalPromptFactory",
      "dst_name": "AbstractPromptFactory"
    }
  ]
}
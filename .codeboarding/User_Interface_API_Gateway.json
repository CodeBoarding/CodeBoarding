{
  "description": "The system is centered around an API Service that handles user requests and orchestrates Job Management for documentation generation tasks. The Documentation Generation component, a core processing unit, performs code analysis and documentation creation. It relies on a Temporary Repository Manager for handling temporary files and repositories. Crucially, the Documentation Generation component now leverages a suite of Static Analysis Tools (including TypeScript Language Server, Pyright, tokei, and gopls) and is configured through a Configuration Manager that manages static_analysis_config.yml and .env files, ensuring the correct setup and operation of the analysis tools and LLM integrations.",
  "components": [
    {
      "name": "API Service",
      "description": "Handles all incoming API requests, validates inputs, initiates background jobs, and serves job status and results.",
      "referenced_source_code": [
        {
          "qualified_name": "local_app.app",
          "reference_file": "local_app.py",
          "reference_start_line": null,
          "reference_end_line": null
        }
      ]
    },
    {
      "name": "Job Management",
      "description": "Manages the persistence and state transitions of documentation generation jobs (e.g., PENDING, RUNNING, COMPLETED, FAILED).",
      "referenced_source_code": [
        {
          "qualified_name": "make_job",
          "reference_file": "local_app.py",
          "reference_start_line": 80,
          "reference_end_line": 92
        },
        {
          "qualified_name": "insert_job",
          "reference_file": "duckdb_crud.py",
          "reference_start_line": 49,
          "reference_end_line": 65
        },
        {
          "qualified_name": "fetch_job",
          "reference_file": "duckdb_crud.py",
          "reference_start_line": 80,
          "reference_end_line": 99
        }
      ]
    },
    {
      "name": "Documentation Generation",
      "description": "Executes the core logic of cloning repositories, analyzing code, and generating documentation files, leveraging static analysis tools and configuration.",
      "referenced_source_code": [
        {
          "qualified_name": "generate_onboarding",
          "reference_file": "local_app.py",
          "reference_start_line": 95,
          "reference_end_line": 166
        },
        {
          "qualified_name": "process_docs_generation_job",
          "reference_file": "local_app.py",
          "reference_start_line": 362,
          "reference_end_line": 440
        }
      ]
    },
    {
      "name": "Temporary Repository Manager",
      "description": "Handles the creation and cleanup of temporary directories used for cloning repositories and storing intermediate analysis results.",
      "referenced_source_code": [
        {
          "qualified_name": "manage_temp_repo",
          "reference_file": "<file_path>",
          "reference_start_line": 1,
          "reference_end_line": 10
        }
      ]
    },
    {
      "name": "Static Analysis Tools",
      "description": "Provides language server functionalities (TypeScript, Pyright) and code analysis tools (tokei, gopls) used by the Documentation Generation component.",
      "referenced_source_code": [
        {
          "qualified_name": "setup.py",
          "reference_file": "setup.py",
          "reference_start_line": null,
          "reference_end_line": null
        },
        {
          "qualified_name": "static_analysis_config.yml",
          "reference_file": "static_analysis_config.yml",
          "reference_start_line": null,
          "reference_end_line": null
        }
      ]
    },
    {
      "name": "Configuration Manager",
      "description": "Manages system configuration, including paths to static analysis tools, LLM provider settings, and repository roots, primarily through static_analysis_config.yml and .env files.",
      "referenced_source_code": [
        {
          "qualified_name": "setup.py",
          "reference_file": "setup.py",
          "reference_start_line": null,
          "reference_end_line": null
        },
        {
          "qualified_name": "static_analysis_config.yml",
          "reference_file": "static_analysis_config.yml",
          "reference_start_line": null,
          "reference_end_line": null
        },
        {
          "qualified_name": ".env",
          "reference_file": ".env",
          "reference_start_line": null,
          "reference_end_line": null
        }
      ]
    },
    {
      "name": "Unclassified",
      "description": "Component for all unclassified files and utility functions (Utility functions/External Libraries/Dependencies)",
      "referenced_source_code": []
    }
  ],
  "components_relations": [
    {
      "relation": "initiates",
      "src_name": "API Service",
      "dst_name": "Job Management"
    },
    {
      "relation": "dispatches tasks to",
      "src_name": "API Service",
      "dst_name": "Documentation Generation"
    },
    {
      "relation": "provides job status and results to",
      "src_name": "Job Management",
      "dst_name": "API Service"
    },
    {
      "relation": "interacts with",
      "src_name": "Documentation Generation",
      "dst_name": "Temporary Repository Manager"
    },
    {
      "relation": "leverages",
      "src_name": "Documentation Generation",
      "dst_name": "Static Analysis Tools"
    },
    {
      "relation": "reads configuration from",
      "src_name": "Documentation Generation",
      "dst_name": "Configuration Manager"
    },
    {
      "relation": "are configured by",
      "src_name": "Static Analysis Tools",
      "dst_name": "Configuration Manager"
    }
  ]
}

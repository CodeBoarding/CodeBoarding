{
  "description": "The system's core architecture revolves around processing user queries through a sequence of specialized components. The Query Processor initiates the flow by parsing incoming requests. These parsed queries are then forwarded to the Language Model Interface, which handles communication with the underlying language model. The output from the language model, which may include instructions for tool usage, is then managed by the Tool Executor. This component is responsible for orchestrating the invocation of various tools, incorporating sophisticated decision-making and execution logic. Finally, the Response Formatter aggregates and structures the information from both the language model and tool executions to construct a coherent and user-friendly response, which is then returned to the Query Processor. This design ensures a clear separation of concerns, enabling efficient and adaptable query processing and tool integration.",
  "components": [
    {
      "name": "Query Processor",
      "description": "Handles incoming user queries, including parsing and initial validation.",
      "referenced_source_code": [
        {
          "qualified_name": "QueryParser:parse",
          "reference_file": "",
          "reference_start_line": null,
          "reference_end_line": null
        }
      ],
      "assigned_files": [],
      "can_expand": false
    },
    {
      "name": "Language Model Interface",
      "description": "Manages interactions with the underlying language model, sending prompts and receiving generated text.",
      "referenced_source_code": [
        {
          "qualified_name": "LLMClient:send_prompt",
          "reference_file": "LLMClient:send_prompt",
          "reference_start_line": null,
          "reference_end_line": null
        },
        {
          "qualified_name": "LLMClient:receive_response",
          "reference_file": "",
          "reference_start_line": null,
          "reference_end_line": null
        }
      ],
      "assigned_files": [
        "agents/llm_config.py",
        "agents/details_agent.py",
        "agents/abstraction_agent.py",
        "agents/prompts/__init__.py",
        "agents/prompts/claude_prompts_bidirectional.py",
        "agents/prompts/gpt_prompts_unidirectional.py",
        "agents/prompts/gemini_flash_prompts_bidirectional.py",
        "agents/prompts/abstract_prompt_factory.py",
        "agents/prompts/gpt_prompts_bidirectional.py",
        "agents/prompts/prompt_factory.py",
        "agents/prompts/gemini_flash_prompts_unidirectional.py",
        "agents/prompts/claude_prompts_unidirectional.py"
      ],
      "can_expand": false
    },
    {
      "name": "Tool Executor",
      "description": "Orchestrates the execution of specific tools, incorporating complex decision-making and execution flows based on the language model's output. It manages tool invocation, result retrieval, and potentially iterative processing or re-prompting.",
      "referenced_source_code": [
        {
          "qualified_name": "ToolRegistry:get_tool",
          "reference_file": "agents/tools/toolkit.py",
          "reference_start_line": null,
          "reference_end_line": null
        },
        {
          "qualified_name": "Tool:execute",
          "reference_file": "agents/tools/base.py",
          "reference_start_line": 57,
          "reference_end_line": 96
        }
      ],
      "assigned_files": [],
      "can_expand": true
    },
    {
      "name": "Response Formatter",
      "description": "Formats the final response to be sent back to the user, combining information from the language model and tool outputs.",
      "referenced_source_code": [
        {
          "qualified_name": "ResponseBuilder:build",
          "reference_file": "ResponseBuilder:build",
          "reference_start_line": null,
          "reference_end_line": null
        }
      ],
      "assigned_files": [],
      "can_expand": false
    },
    {
      "name": "Unclassified",
      "description": "Component for all unclassified files and utility functions (Utility functions/External Libraries/Dependencies)",
      "referenced_source_code": [],
      "assigned_files": [],
      "can_expand": false
    }
  ],
  "components_relations": [
    {
      "relation": "sends parsed queries to",
      "src_name": "Query Processor",
      "dst_name": "Language Model Interface"
    },
    {
      "relation": "provides model output to",
      "src_name": "Language Model Interface",
      "dst_name": "Tool Executor"
    },
    {
      "relation": "forwards execution results and model outputs to",
      "src_name": "Tool Executor",
      "dst_name": "Response Formatter"
    },
    {
      "relation": "returns the final formatted response to",
      "src_name": "Response Formatter",
      "dst_name": "Query Processor"
    }
  ]
}
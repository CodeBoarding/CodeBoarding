{
  "description": "The Licensing, Identity, and Telemetry subsystem manages the core business logic of the extension, ensuring secure access to services via hardware fingerprinting while collecting anonymized performance metrics. The architecture is characterized by a central state-holding manager and a specialized network gateway that decouples local logic from remote service interactions.",
  "components": [
    {
      "name": "License & Identity Manager",
      "description": "Generates unique, stable hardware fingerprints (SHA-256 hashes of system UUID, disk serials, and MAC addresses) and manages the local lifecycle of license validation and tier status.",
      "referenced_source_code": [
        {
          "qualified_name": "backend.services.LicenseService.LicenseService",
          "reference_file": "backend/services/LicenseService.ts",
          "reference_start_line": 28,
          "reference_end_line": 317
        },
        {
          "qualified_name": "backend.services.LicenseService.LicenseInfo",
          "reference_file": "backend/services/LicenseService.ts",
          "reference_start_line": 8,
          "reference_end_line": 20
        },
        {
          "qualified_name": "backend.services.LicenseService.TierInfo",
          "reference_file": "backend/services/LicenseService.ts",
          "reference_start_line": 22,
          "reference_end_line": 26
        }
      ],
      "assigned_files": [],
      "source_cluster_ids": [],
      "can_expand": false
    },
    {
      "name": "Cloud Service Gateway",
      "description": "A specialized networking client that abstracts communication with AWS and Google Cloud services. It handles header injection, device identification, and retry logic, ensuring that no sensitive API keys are transmitted to clients.",
      "referenced_source_code": [
        {
          "qualified_name": "backend.services.AWSCommunicationService.AWSCommunicationService",
          "reference_file": "backend/services/AWSCommunicationService.ts",
          "reference_start_line": 47,
          "reference_end_line": 250
        },
        {
          "qualified_name": "backend.services.AWSCommunicationService.LicenseValidationRequest",
          "reference_file": "backend/services/AWSCommunicationService.ts",
          "reference_start_line": 7,
          "reference_end_line": 20
        }
      ],
      "assigned_files": [],
      "source_cluster_ids": [],
      "can_expand": false
    },
    {
      "name": "Telemetry & Usage Collector",
      "description": "Monitors extension health and repository metrics (LOC, language distribution). It implements independent hardware hashing for telemetry attribution and reports both performance data and token consumption.",
      "referenced_source_code": [
        {
          "qualified_name": "backend.services.AnalyticsService.AnalyticsService",
          "reference_file": "backend/services/AnalyticsService.ts",
          "reference_start_line": 23,
          "reference_end_line": 608
        },
        {
          "qualified_name": "backend.utils.error-handler.AnalysisErrorHandler",
          "reference_file": "backend/utils/error-handler.ts",
          "reference_start_line": 8,
          "reference_end_line": 68
        }
      ],
      "assigned_files": [
        "backend/utils/error-handler.ts"
      ],
      "source_cluster_ids": [],
      "can_expand": true
    },
    {
      "name": "Tier Status Coordinator",
      "description": "Bridges the internal license state with the VS Code UI. It manages the Status Bar display (e.g., \"$(graph) Free Tier\") and handles the upgrade workflow by navigating users to external payment portals.",
      "referenced_source_code": [
        {
          "qualified_name": "backend.services.TierDisplayService.TierDisplayService",
          "reference_file": "backend/services/TierDisplayService.ts",
          "reference_start_line": 14,
          "reference_end_line": 118
        }
      ],
      "assigned_files": [
        "backend/services/TierDisplayService.ts"
      ],
      "source_cluster_ids": [],
      "can_expand": false
    },
    {
      "name": "Unclassified",
      "description": "Component for all unclassified files and utility functions (Utility functions/External Libraries/Dependencies)",
      "referenced_source_code": [],
      "assigned_files": [],
      "source_cluster_ids": [],
      "can_expand": false
    }
  ],
  "components_relations": [
    {
      "relation": "Remote License Validation",
      "src_name": "License & Identity Manager",
      "dst_name": "Cloud Service Gateway"
    },
    {
      "relation": "Tier Status Synchronization",
      "src_name": "Tier Status Coordinator",
      "dst_name": "License & Identity Manager"
    },
    {
      "relation": "Anonymized Metric Delivery",
      "src_name": "Telemetry & Usage Collector",
      "dst_name": "Cloud Service Gateway"
    },
    {
      "relation": "Token Usage Accounting",
      "src_name": "Telemetry & Usage Collector",
      "dst_name": "Cloud Service Gateway"
    }
  ]
}
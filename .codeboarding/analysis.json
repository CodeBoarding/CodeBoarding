{
  "description": "The system operates as a multi-stage pipeline, orchestrated by the `Orchestration Engine`. It begins by directing the `Static Analysis Engine` to perform comprehensive code analysis, including parsing, graph generation, and now, intelligent filtering of analysis targets. The structured output from this stage is then fed into the `AI Processing Layer`, which leverages large language models to derive deep architectural insights and identify key components and their relationships. These insights are subsequently passed to the `Output Generation Engine` for formatting into various documentation types. Finally, the `Diagram Generation Service` transforms the structured architectural data into visual diagrams, enhancing comprehension and navigation of the analyzed codebase.",
  "components": [
    {
      "name": "Orchestration Engine",
      "description": "The central control unit managing the entire code analysis and documentation generation pipeline. It coordinates the execution flow, from static analysis to AI interpretation and final output generation.",
      "referenced_source_code": [
        {
          "qualified_name": "agents.meta_agent.MetaAgent",
          "reference_file": "agents/meta_agent.py",
          "reference_start_line": null,
          "reference_end_line": null
        },
        {
          "qualified_name": "agents.planner_agent.PlannerAgent",
          "reference_file": "agents/planner_agent.py",
          "reference_start_line": null,
          "reference_end_line": null
        }
      ],
      "assigned_files": [
        "main.py",
        "local_app.py",
        "agents/planner_agent.py",
        "agents/meta_agent.py"
      ],
      "can_expand": true
    },
    {
      "name": "Static Analysis Engine",
      "description": "Responsible for parsing source code, building Abstract Syntax Trees (ASTs), generating Control Flow Graphs (CFGs), and applying adaptive clustering algorithms to abstract these graphs into logical architectural components. It now also incorporates a filtering mechanism to refine the scope of code analysis based on ignore rules, providing structured, clustered, and filtered code representations.",
      "referenced_source_code": [
        {
          "qualified_name": "static_analyzer",
          "reference_file": "static_analyzer",
          "reference_start_line": null,
          "reference_end_line": null
        },
        {
          "qualified_name": "static_analyzer.graph.Graph",
          "reference_file": "static_analyzer/graph.py",
          "reference_start_line": null,
          "reference_end_line": null
        },
        {
          "qualified_name": "repo_utils/ignore.py",
          "reference_file": "repo_utils/ignore.py",
          "reference_start_line": null,
          "reference_end_line": null
        }
      ],
      "assigned_files": [
        "repo_utils/ignore.py",
        "static_analyzer/programming_language.py",
        "static_analyzer/reference_resolve_mixin.py",
        "static_analyzer/graph.py",
        "static_analyzer/analysis_result.py",
        "static_analyzer/scanner.py",
        "static_analyzer/typescript_config_scanner.py",
        "static_analyzer/lsp_client/typescript_client.py",
        "static_analyzer/lsp_client/client.py"
      ],
      "can_expand": true
    },
    {
      "name": "AI Processing Layer",
      "description": "This integrated layer processes structured code data using Large Language Models (LLMs) to derive architectural insights, identify components, and understand relationships. It includes prompt generation and management, and handles interactions with various LLM providers.",
      "referenced_source_code": [
        {
          "qualified_name": "agents.abstraction_agent.AbstractionAgent",
          "reference_file": "agents/abstraction_agent.py",
          "reference_start_line": null,
          "reference_end_line": null
        },
        {
          "qualified_name": "agents.details_agent.DetailsAgent",
          "reference_file": "agents/details_agent.py",
          "reference_start_line": null,
          "reference_end_line": null
        },
        {
          "qualified_name": "agents.prompts.prompt_factory.PromptFactory",
          "reference_file": "agents/prompts/prompt_factory.py",
          "reference_start_line": null,
          "reference_end_line": null
        },
        {
          "qualified_name": "agents.llm_config.LLMConfig",
          "reference_file": "agents/llm_config.py",
          "reference_start_line": 14,
          "reference_end_line": 52
        }
      ],
      "assigned_files": [
        "agents/llm_config.py",
        "agents/diff_analyzer.py",
        "agents/details_agent.py",
        "agents/validator_agent.py",
        "agents/abstraction_agent.py",
        "agents/agent_responses.py",
        "agents/agent.py",
        "agents/tools/read_source.py",
        "agents/tools/read_file_structure.py",
        "agents/tools/external_deps.py",
        "agents/tools/base.py",
        "agents/tools/toolkit.py",
        "agents/tools/read_packages.py",
        "agents/tools/read_cfg.py",
        "agents/tools/get_method_invocations.py",
        "agents/tools/read_git_diff.py",
        "agents/tools/read_file.py",
        "agents/tools/read_structure.py",
        "agents/tools/read_docs.py",
        "agents/prompts/claude_prompts_bidirectional.py",
        "agents/prompts/gpt_prompts_unidirectional.py",
        "agents/prompts/gemini_flash_prompts_bidirectional.py",
        "agents/prompts/abstract_prompt_factory.py",
        "agents/prompts/gpt_prompts_bidirectional.py",
        "agents/prompts/prompt_factory.py",
        "agents/prompts/gemini_flash_prompts_unidirectional.py",
        "agents/prompts/claude_prompts_unidirectional.py",
        "repo_utils/git_diff.py"
      ],
      "can_expand": true
    },
    {
      "name": "Output Generation Engine",
      "description": "Takes the structured architectural insights from the AI Processing Layer and formats them into various output types, such as documentation files (Markdown, JSON), reports, or raw data suitable for diagram generation.",
      "referenced_source_code": [
        {
          "qualified_name": "output_generators",
          "reference_file": "output_generators",
          "reference_start_line": null,
          "reference_end_line": null
        }
      ],
      "assigned_files": [
        "output_generators/sphinx.py",
        "output_generators/mdx.py",
        "output_generators/html.py",
        "output_generators/html_template.py",
        "output_generators/markdown.py"
      ],
      "can_expand": true
    },
    {
      "name": "Diagram Generation Service",
      "description": "Specializes in converting structured architectural data into visual diagrams, potentially using tools like Mermaid.js. It enhances comprehension by providing interactive and visual representations of the analyzed architecture.",
      "referenced_source_code": [
        {
          "qualified_name": "diagram_analysis",
          "reference_file": "diagram_analysis",
          "reference_start_line": null,
          "reference_end_line": null
        }
      ],
      "assigned_files": [
        "diagram_analysis/analysis_json.py",
        "diagram_analysis/diagram_generator.py",
        "diagram_analysis/version.py"
      ],
      "can_expand": true
    },
    {
      "name": "Unclassified",
      "description": "Component for all unclassified files and utility functions (Utility functions/External Libraries/Dependencies)",
      "referenced_source_code": [],
      "assigned_files": [
        "vscode_constants.py",
        "utils.py",
        "setup.py",
        "github_action.py",
        "duckdb_crud.py",
        "logging_config.py",
        "agents/__init__.py",
        "agents/tools/__init__.py",
        "agents/prompts/__init__.py",
        "repo_utils/__init__.py",
        "repo_utils/errors.py",
        "evals/base.py",
        "evals/cli.py",
        "evals/schemas.py",
        "evals/utils.py",
        "evals/config.py",
        "evals/definitions/static_analysis.py",
        "evals/definitions/end_to_end.py",
        "evals/definitions/scalability.py",
        "static_analyzer/__init__.py",
        "static_analyzer/lsp_client/__init__.py",
        "output_generators/__init__.py",
        "diagram_analysis/__init__.py",
        "monitoring/paths.py",
        "monitoring/__init__.py",
        "monitoring/context.py",
        "monitoring/callbacks.py",
        "monitoring/stats.py",
        "monitoring/mixin.py",
        "monitoring/writers.py"
      ],
      "can_expand": false
    }
  ],
  "components_relations": [
    {
      "relation": "initiates code analysis in",
      "src_name": "Orchestration Engine",
      "dst_name": "Static Analysis Engine"
    },
    {
      "relation": "triggers the interpretation phase in",
      "src_name": "Orchestration Engine",
      "dst_name": "AI Processing Layer"
    },
    {
      "relation": "commands output generation from",
      "src_name": "Orchestration Engine",
      "dst_name": "Output Generation Engine"
    },
    {
      "relation": "provides clustered architectural components to",
      "src_name": "Static Analysis Engine",
      "dst_name": "AI Processing Layer"
    },
    {
      "relation": "sends interpreted architectural data to",
      "src_name": "AI Processing Layer",
      "dst_name": "Output Generation Engine"
    },
    {
      "relation": "provides diagram data to",
      "src_name": "Output Generation Engine",
      "dst_name": "Diagram Generation Service"
    }
  ]
}

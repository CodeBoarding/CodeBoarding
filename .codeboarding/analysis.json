{
  "description": "The system architecture is designed around a modular, AI-driven code analysis pipeline. It begins with the Repository & Project Setup component, which is responsible for ingesting and preparing codebases for analysis. This prepared code is then fed into the Static Analysis Engine, which performs in-depth code examination and identifies changes. The structural insights from this analysis, such as call graphs and code clusters, are managed by the Code Structure & Clustering component. The core intelligence of the system resides in the AI Analysis Orchestrator, which leverages these structural insights and interacts with LLM Prompting & Interface to generate and refine analysis. Finally, the Output Generation & Job Management component handles the persistence of analysis jobs and the generation of various documentation formats, while the Monitoring & Evaluation component continuously tracks the performance and events of the analysis process.",
  "components": [
    {
      "name": "Repository & Project Setup",
      "description": "Manages the acquisition and initial configuration of code repositories, including cloning, language detection, and project-specific setup (e.g., Java build systems).",
      "key_entities": [
        {
          "qualified_name": "ProjectScanner",
          "reference_file": "static_analyzer/scanner.py",
          "reference_start_line": 13,
          "reference_end_line": 85
        },
        {
          "qualified_name": "GitDiff",
          "reference_file": "repo_utils/git_diff.py",
          "reference_start_line": 1,
          "reference_end_line": 100
        }
      ],
      "assigned_files": [
        "repo_utils/git_diff.py",
        "static_analyzer/scanner.py"
      ],
      "source_cluster_ids": [],
      "can_expand": true
    },
    {
      "name": "Static Analysis Engine",
      "description": "Performs detailed static code analysis using Language Server Protocols (LSP), stores the analysis results, resolves source references, and identifies code changes.",
      "key_entities": [
        {
          "qualified_name": "LSP",
          "reference_file": "agents/tools/read_cfg.py",
          "reference_start_line": 1,
          "reference_end_line": 100
        },
        {
          "qualified_name": "AnalysisResultStore",
          "reference_file": "duckdb_crud.py",
          "reference_start_line": 1,
          "reference_end_line": 100
        },
        {
          "qualified_name": "CodeDiffAnalyzer",
          "reference_file": "agents/diff_analyzer.py",
          "reference_start_line": 1,
          "reference_end_line": 100
        }
      ],
      "assigned_files": [
        "agents/diff_analyzer.py",
        "duckdb_crud.py",
        "agents/tools/read_cfg.py"
      ],
      "source_cluster_ids": [],
      "can_expand": true
    },
    {
      "name": "Code Structure & Clustering",
      "description": "Constructs and manipulates call graphs, identifies code clusters, and provides utilities for managing these structural insights.",
      "key_entities": [
        {
          "qualified_name": "CallGraphBuilder",
          "reference_file": "agents/tools/get_method_invocations.py",
          "reference_start_line": 1,
          "reference_end_line": 100
        },
        {
          "qualified_name": "CodeClusterer",
          "reference_file": "agents/cluster_methods_mixin.py",
          "reference_start_line": 1,
          "reference_end_line": 100
        }
      ],
      "assigned_files": [
        "agents/tools/get_method_invocations.py",
        "agents/cluster_methods_mixin.py"
      ],
      "source_cluster_ids": [],
      "can_expand": true
    },
    {
      "name": "LLM Prompting & Interface",
      "description": "Responsible for generating and managing structured prompts for various Large Language Models (LLMs), abstracting the LLM interaction layer.",
      "key_entities": [
        {
          "qualified_name": "PromptFactory",
          "reference_file": "agents/prompts/prompt_factory.py",
          "reference_start_line": 1,
          "reference_end_line": 100
        },
        {
          "qualified_name": "AbstractPromptFactory",
          "reference_file": "agents/prompts/abstract_prompt_factory.py",
          "reference_start_line": 1,
          "reference_end_line": 100
        }
      ],
      "assigned_files": [
        "agents/prompts/abstract_prompt_factory.py",
        "agents/prompts/prompt_factory.py"
      ],
      "source_cluster_ids": [],
      "can_expand": true
    },
    {
      "name": "AI Analysis Orchestrator",
      "description": "The central intelligence hub that orchestrates the analysis process, invokes LLMs, utilizes specialized tools, and refines structural insights based on AI feedback.",
      "key_entities": [
        {
          "qualified_name": "MetaAgent",
          "reference_file": "agents/meta_agent.py",
          "reference_start_line": 1,
          "reference_end_line": 100
        },
        {
          "qualified_name": "DetailedAnalysisAgent",
          "reference_file": "agents/details_agent.py",
          "reference_start_line": 1,
          "reference_end_line": 100
        },
        {
          "qualified_name": "AgentToolkit",
          "reference_file": "agents/tools/toolkit.py",
          "reference_start_line": 1,
          "reference_end_line": 100
        },
        {
          "qualified_name": "AgentResponses",
          "reference_file": "agents/agent_responses.py",
          "reference_start_line": 1,
          "reference_end_line": 100
        }
      ],
      "assigned_files": [
        "agents/agent_responses.py",
        "agents/meta_agent.py",
        "agents/details_agent.py",
        "agents/tools/toolkit.py"
      ],
      "source_cluster_ids": [],
      "can_expand": true
    },
    {
      "name": "Output Generation & Job Management",
      "description": "Manages the overall analysis workflow, persists job states, and generates diverse documentation outputs based on the AI-driven analysis.",
      "key_entities": [
        {
          "qualified_name": "WorkflowOrchestrator",
          "reference_file": "main.py",
          "reference_start_line": 1,
          "reference_end_line": 100
        },
        {
          "qualified_name": "JobPersistenceManager",
          "reference_file": "duckdb_crud.py",
          "reference_start_line": 1,
          "reference_end_line": 100
        },
        {
          "qualified_name": "DocumentationGenerator",
          "reference_file": "output_generators/markdown.py",
          "reference_start_line": 1,
          "reference_end_line": 100
        }
      ],
      "assigned_files": [
        "output_generators/markdown.py",
        "main.py",
        "duckdb_crud.py"
      ],
      "source_cluster_ids": [],
      "can_expand": true
    },
    {
      "name": "Monitoring & Evaluation",
      "description": "Captures, streams, and processes monitoring statistics and events from LLM and tool executions, providing a framework for performance tracking and evaluation.",
      "key_entities": [
        {
          "qualified_name": "MonitoringCallbacks",
          "reference_file": "monitoring/callbacks.py",
          "reference_start_line": 1,
          "reference_end_line": 100
        },
        {
          "qualified_name": "EventHandler",
          "reference_file": "monitoring/mixin.py",
          "reference_start_line": 1,
          "reference_end_line": 100
        },
        {
          "qualified_name": "EvaluationFramework",
          "reference_file": "evals/base.py",
          "reference_start_line": 27,
          "reference_end_line": 246
        }
      ],
      "assigned_files": [
        "monitoring/mixin.py",
        "monitoring/callbacks.py",
        "evals/base.py"
      ],
      "source_cluster_ids": [],
      "can_expand": true
    }
  ],
  "components_relations": [
    {
      "relation": "Provides codebase for analysis.",
      "src_name": "Repository & Project Setup",
      "dst_name": "Static Analysis Engine"
    },
    {
      "relation": "Provides raw analysis data for graph construction.",
      "src_name": "Static Analysis Engine",
      "dst_name": "Code Structure & Clustering"
    },
    {
      "relation": "Provides detailed static analysis results.",
      "src_name": "Static Analysis Engine",
      "dst_name": "AI Analysis Orchestrator"
    },
    {
      "relation": "Provides structural insights and code clusters.",
      "src_name": "Code Structure & Clustering",
      "dst_name": "AI Analysis Orchestrator"
    },
    {
      "relation": "Requests LLM interaction and prompt generation.",
      "src_name": "AI Analysis Orchestrator",
      "dst_name": "LLM Prompting & Interface"
    },
    {
      "relation": "Sends final, interpreted analysis results for documentation.",
      "src_name": "AI Analysis Orchestrator",
      "dst_name": "Output Generation & Job Management"
    },
    {
      "relation": "Streams agent and tool usage data.",
      "src_name": "AI Analysis Orchestrator",
      "dst_name": "Monitoring & Evaluation"
    },
    {
      "relation": "Streams LLM call metrics and usage data.",
      "src_name": "LLM Prompting & Interface",
      "dst_name": "Monitoring & Evaluation"
    }
  ]
}
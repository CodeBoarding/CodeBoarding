{
  "description": "The system operates as a sophisticated code analysis and architectural diagram generation tool, centered around an Orchestration Engine (Agent Core). This engine initiates analysis requests received from the User Interface / API Gateway, then interacts with the Repository Manager to access the codebase. The codebase is subsequently submitted to the Static Analysis Engine for in-depth structural analysis. Results from static analysis inform the LLM Prompt Factory, which generates tailored prompts for the AI Interpretation Layer. This layer processes prompts and context using LLMs to derive architectural insights. These insights are then passed to the Output Generation Engine for structured formatting, and finally to the Diagram Analysis & Renderer to produce visual architectural diagrams, which are displayed back through the User Interface / API Gateway. This core flow is preserved, with internal enhancements across key components improving overall robustness and capability.",
  "components": [
    {
      "name": "User Interface / API Gateway",
      "description": "The system's primary interface for users, handling analysis requests and displaying results, with expanded integration for VS Code.",
      "referenced_source_code": [
        {
          "qualified_name": "local_app.app",
          "reference_file": "local_app.py",
          "reference_start_line": null,
          "reference_end_line": null
        }
      ],
      "assigned_files": [
        "vscode_constants.py",
        "vscode_runnable.py",
        "local_app.py"
      ],
      "can_expand": true
    },
    {
      "name": "Orchestration Engine (Agent Core)",
      "description": "The central control unit managing the entire analysis workflow, coordinating all components, maintaining analysis state, and effectively managing enhanced capabilities and analysis workflow.",
      "referenced_source_code": [
        {
          "qualified_name": "agents.agent.CodeBoardingAgent",
          "reference_file": "agents/agent.py",
          "reference_start_line": null,
          "reference_end_line": null
        }
      ],
      "assigned_files": [
        "agents/__init__.py",
        "agents/diff_analyzer.py",
        "agents/validator_agent.py",
        "agents/planner_agent.py",
        "agents/meta_agent.py",
        "agents/monitoring.py",
        "agents/agent_responses.py",
        "agents/agent.py",
        "agents/tools/read_source.py",
        "agents/tools/read_file_structure.py",
        "agents/tools/__init__.py",
        "agents/tools/external_deps.py",
        "agents/tools/read_packages.py",
        "agents/tools/read_cfg.py",
        "agents/tools/get_method_invocations.py",
        "agents/tools/read_git_diff.py",
        "agents/tools/read_file.py",
        "agents/tools/utils.py",
        "agents/tools/read_structure.py",
        "agents/tools/read_docs.py"
      ],
      "can_expand": true
    },
    {
      "name": "Repository Manager",
      "description": "Manages all interactions with code repositories, providing a standardized interface for source code access and temporary folder management.",
      "referenced_source_code": [
        {
          "qualified_name": "utils.create_temp_repo_folder",
          "reference_file": "utils.py",
          "reference_start_line": null,
          "reference_end_line": null
        },
        {
          "qualified_name": "utils.remove_temp_repo_folder",
          "reference_file": "utils.py",
          "reference_start_line": null,
          "reference_end_line": null
        }
      ],
      "assigned_files": [
        "utils.py",
        "repo_utils/__init__.py",
        "repo_utils/git_diff.py",
        "repo_utils/errors.py"
      ],
      "can_expand": false
    },
    {
      "name": "Static Analysis Engine",
      "description": "Performs in-depth static analysis on source code to extract structural information like CFGs and ASTs, now with significantly enhanced programming language support, more robust scanning mechanisms, and improved interaction with Language Server Protocols (LSP).",
      "referenced_source_code": [
        {
          "qualified_name": "static_analyzer.scanner.Scanner",
          "reference_file": "static_analyzer/scanner.py",
          "reference_start_line": null,
          "reference_end_line": null
        }
      ],
      "assigned_files": [
        "static_analyzer/programming_language.py",
        "static_analyzer/__init__.py",
        "static_analyzer/reference_resolve_mixin.py",
        "static_analyzer/graph.py",
        "static_analyzer/analysis_result.py",
        "static_analyzer/scanner.py",
        "static_analyzer/typescript_config_scanner.py",
        "static_analyzer/lsp_client/__init__.py",
        "static_analyzer/lsp_client/typescript_client.py",
        "static_analyzer/lsp_client/client.py"
      ],
      "can_expand": true
    },
    {
      "name": "LLM Prompt Factory",
      "description": "Dynamically generates and manages prompts tailored for various LLMs and code analysis tasks.",
      "referenced_source_code": [
        {
          "qualified_name": "agents.prompts.prompt_factory.PromptFactory",
          "reference_file": "agents/prompts/prompt_factory.py",
          "reference_start_line": null,
          "reference_end_line": null
        }
      ],
      "assigned_files": [
        "agents/prompts/__init__.py",
        "agents/prompts/claude_prompts_bidirectional.py",
        "agents/prompts/gpt_prompts_unidirectional.py",
        "agents/prompts/gemini_flash_prompts_bidirectional.py",
        "agents/prompts/abstract_prompt_factory.py",
        "agents/prompts/gpt_prompts_bidirectional.py",
        "agents/prompts/prompt_factory.py",
        "agents/prompts/gemini_flash_prompts_unidirectional.py",
        "agents/prompts/claude_prompts_unidirectional.py"
      ],
      "can_expand": true
    },
    {
      "name": "AI Interpretation Layer",
      "description": "Interfaces with LLM providers to process analysis results and prompts, interpreting code context and generating architectural insights with more sophisticated logic for processing analysis results and prompts.",
      "referenced_source_code": [
        {
          "qualified_name": "agents.abstraction_agent.AbstractionAgent",
          "reference_file": "agents/abstraction_agent.py",
          "reference_start_line": null,
          "reference_end_line": null
        },
        {
          "qualified_name": "agents.details_agent.DetailsAgent",
          "reference_file": "agents/details_agent.py",
          "reference_start_line": null,
          "reference_end_line": null
        }
      ],
      "assigned_files": [
        "agents/details_agent.py",
        "agents/abstraction_agent.py"
      ],
      "can_expand": true
    },
    {
      "name": "Output Generation Engine",
      "description": "Transforms AI-interpreted insights into structured output formats for diagram generation and documentation.",
      "referenced_source_code": [
        {
          "qualified_name": "output_generators.markdown.MarkdownGenerator",
          "reference_file": "output_generators/markdown.py",
          "reference_start_line": null,
          "reference_end_line": null
        },
        {
          "qualified_name": "output_generators.html.HTMLGenerator",
          "reference_file": "output_generators/html.py",
          "reference_start_line": null,
          "reference_end_line": null
        }
      ],
      "assigned_files": [
        "output_generators/__init__.py",
        "output_generators/sphinx.py",
        "output_generators/mdx.py",
        "output_generators/html.py",
        "output_generators/html_template.py",
        "output_generators/markdown.py"
      ],
      "can_expand": true
    },
    {
      "name": "Diagram Analysis & Renderer",
      "description": "Refines structured output into diagram-specific formats and renders visual architectural diagrams, with enhanced capabilities for transforming AI-interpreted insights and rendering.",
      "referenced_source_code": [
        {
          "qualified_name": "diagram_analysis.diagram_generator.DiagramGenerator",
          "reference_file": "diagram_analysis/diagram_generator.py",
          "reference_start_line": null,
          "reference_end_line": null
        }
      ],
      "assigned_files": [
        "diagram_analysis/__init__.py",
        "diagram_analysis/analysis_json.py",
        "diagram_analysis/diagram_generator.py",
        "diagram_analysis/version.py"
      ],
      "can_expand": true
    },
    {
      "name": "Unclassified",
      "description": "Component for all unclassified files and utility functions (Utility functions/External Libraries/Dependencies)",
      "referenced_source_code": [],
      "assigned_files": [
        "setup.py",
        "github_action.py",
        "demo.py",
        "duckdb_crud.py",
        "logging_config.py",
        "evals/static_analysis_eval.py",
        "evals/end_to_end_eval.py",
        "evals/run_all_evals.py",
        "evals/report_generator.py"
      ],
      "can_expand": false
    }
  ],
  "components_relations": [
    {
      "relation": "Initiates Analysis Request",
      "src_name": "User Interface / API Gateway",
      "dst_name": "Orchestration Engine (Agent Core)"
    },
    {
      "relation": "Manages Repository Access",
      "src_name": "Orchestration Engine (Agent Core)",
      "dst_name": "Repository Manager"
    },
    {
      "relation": "Provides Codebase",
      "src_name": "Repository Manager",
      "dst_name": "Orchestration Engine (Agent Core)"
    },
    {
      "relation": "Submits Codebase for Static Analysis",
      "src_name": "Orchestration Engine (Agent Core)",
      "dst_name": "Static Analysis Engine"
    },
    {
      "relation": "Returns Static Analysis Results",
      "src_name": "Static Analysis Engine",
      "dst_name": "Orchestration Engine (Agent Core)"
    },
    {
      "relation": "Requests Prompt Generation",
      "src_name": "Orchestration Engine (Agent Core)",
      "dst_name": "LLM Prompt Factory"
    },
    {
      "relation": "Provides Tailored Prompt",
      "src_name": "LLM Prompt Factory",
      "dst_name": "Orchestration Engine (Agent Core)"
    },
    {
      "relation": "Sends Prompt & Context to LLM",
      "src_name": "Orchestration Engine (Agent Core)",
      "dst_name": "AI Interpretation Layer"
    },
    {
      "relation": "Returns LLM Interpreted Insights",
      "src_name": "AI Interpretation Layer",
      "dst_name": "Orchestration Engine (Agent Core)"
    },
    {
      "relation": "Processes Insights for Output",
      "src_name": "Orchestration Engine (Agent Core)",
      "dst_name": "Output Generation Engine"
    },
    {
      "relation": "Provides Structured Diagram Data",
      "src_name": "Output Generation Engine",
      "dst_name": "Diagram Analysis & Renderer"
    },
    {
      "relation": "Renders & Displays Diagram",
      "src_name": "Diagram Analysis & Renderer",
      "dst_name": "User Interface / API Gateway"
    }
  ]
}

{
  "description": "The system is designed around a central `Orchestration Engine` that manages the entire code analysis and documentation generation workflow. User requests are initiated through the `User Interface / API Gateway`, which then delegates the processing to the `Orchestration Engine`. This engine interacts with the `Repository Manager` to access code, the `Static Analysis Engine` to extract structural information, and the `LLM Prompt Factory` to prepare prompts for AI. The `AI Interpretation Layer` processes these prompts and analysis results to generate architectural insights. Finally, the `Output Generation Engine` formats these insights, and the `Diagram Analysis & Renderer` visualizes them, with the results being delivered back through the `User Interface / API Gateway`.",
  "components": [
    {
      "name": "User Interface / API Gateway",
      "description": "The primary interface for users to initiate code analysis and view the generated architectural diagrams. It acts as the system's entry and exit point, handling API requests and responses.",
      "referenced_source_code": [
        {
          "qualified_name": "local_app.app",
          "reference_file": "local_app.py",
          "reference_start_line": null,
          "reference_end_line": null
        }
      ],
      "assigned_files": [
        "local_app.py"
      ],
      "can_expand": true
    },
    {
      "name": "Orchestration Engine (Agent Core)",
      "description": "The central control unit that manages the entire analysis workflow, coordinating interactions between all other components and maintaining the state of the analysis. It orchestrates the various agents to perform their tasks.",
      "referenced_source_code": [
        {
          "qualified_name": "agents.meta_agent.MetaAgent",
          "reference_file": "agents/meta_agent.py",
          "reference_start_line": null,
          "reference_end_line": null
        }
      ],
      "assigned_files": [
        "agents/__init__.py",
        "agents/planner_agent.py",
        "agents/meta_agent.py",
        "agents/agent.py"
      ],
      "can_expand": true
    },
    {
      "name": "Repository Manager",
      "description": "Handles all interactions with code repositories, including cloning, fetching, and providing a standardized interface for accessing the source code. It also manages temporary repository folders.",
      "referenced_source_code": [
        {
          "qualified_name": "utils.create_temp_repo_folder",
          "reference_file": "utils.py",
          "reference_start_line": null,
          "reference_end_line": null
        },
        {
          "qualified_name": "utils.remove_temp_repo_folder",
          "reference_file": "utils.py",
          "reference_start_line": null,
          "reference_end_line": null
        }
      ],
      "assigned_files": [
        "utils.py",
        "repo_utils/__init__.py",
        "repo_utils/git_diff.py",
        "repo_utils/errors.py"
      ],
      "can_expand": true
    },
    {
      "name": "Static Analysis Engine",
      "description": "Performs in-depth static analysis on the source code to extract structural information such as Control Flow Graphs (CFGs) and Abstract Syntax Trees (ASTs).",
      "referenced_source_code": [
        {
          "qualified_name": "static_analyzer.scanner.Scanner",
          "reference_file": "static_analyzer/scanner.py",
          "reference_start_line": null,
          "reference_end_line": null
        }
      ],
      "assigned_files": [
        "static_analyzer/programming_language.py",
        "static_analyzer/__init__.py",
        "static_analyzer/reference_resolve_mixin.py",
        "static_analyzer/graph.py",
        "static_analyzer/analysis_result.py",
        "static_analyzer/scanner.py",
        "static_analyzer/typescript_config_scanner.py",
        "static_analyzer/lsp_client/__init__.py",
        "static_analyzer/lsp_client/typescript_client.py",
        "static_analyzer/lsp_client/client.py"
      ],
      "can_expand": true
    },
    {
      "name": "LLM Prompt Factory",
      "description": "Dynamically generates and manages prompts specifically tailored for various Large Language Models (LLMs) and different code analysis tasks.",
      "referenced_source_code": [
        {
          "qualified_name": "agents.prompts.prompt_factory.PromptFactory",
          "reference_file": "agents/prompts/prompt_factory.py",
          "reference_start_line": null,
          "reference_end_line": null
        }
      ],
      "assigned_files": [
        "agents/prompts/__init__.py",
        "agents/prompts/claude_prompts_bidirectional.py",
        "agents/prompts/gpt_prompts_unidirectional.py",
        "agents/prompts/gemini_flash_prompts_bidirectional.py",
        "agents/prompts/abstract_prompt_factory.py",
        "agents/prompts/gpt_prompts_bidirectional.py",
        "agents/prompts/prompt_factory.py",
        "agents/prompts/gemini_flash_prompts_unidirectional.py",
        "agents/prompts/claude_prompts_unidirectional.py"
      ],
      "can_expand": true
    },
    {
      "name": "AI Interpretation Layer",
      "description": "Interfaces with diverse LLM providers to process static analysis results and prompts, interpreting code context and generating architectural insights. This layer includes agents responsible for abstraction and detailed analysis.",
      "referenced_source_code": [
        {
          "qualified_name": "agents.abstraction_agent.AbstractionAgent",
          "reference_file": "agents/abstraction_agent.py",
          "reference_start_line": null,
          "reference_end_line": null
        },
        {
          "qualified_name": "agents.details_agent.DetailsAgent",
          "reference_file": "agents/details_agent.py",
          "reference_start_line": null,
          "reference_end_line": null
        }
      ],
      "assigned_files": [
        "agents/diff_analyzer.py",
        "agents/details_agent.py",
        "agents/validator_agent.py",
        "agents/abstraction_agent.py",
        "agents/tools/read_source.py",
        "agents/tools/read_file_structure.py",
        "agents/tools/__init__.py",
        "agents/tools/external_deps.py",
        "agents/tools/read_packages.py",
        "agents/tools/read_cfg.py",
        "agents/tools/get_method_invocations.py",
        "agents/tools/read_git_diff.py",
        "agents/tools/read_file.py",
        "agents/tools/utils.py",
        "agents/tools/read_structure.py",
        "agents/tools/read_docs.py"
      ],
      "can_expand": true
    },
    {
      "name": "Output Generation Engine",
      "description": "Transforms the AI-interpreted insights into structured output formats, preparing the data for diagram generation and other documentation purposes (e.g., Markdown, HTML).",
      "referenced_source_code": [
        {
          "qualified_name": "output_generators.markdown.MarkdownGenerator",
          "reference_file": "output_generators/markdown.py",
          "reference_start_line": null,
          "reference_end_line": null
        },
        {
          "qualified_name": "output_generators.html.HTMLGenerator",
          "reference_file": "output_generators/html.py",
          "reference_start_line": null,
          "reference_end_line": null
        }
      ],
      "assigned_files": [
        "output_generators/__init__.py",
        "output_generators/sphinx.py",
        "output_generators/mdx.py",
        "output_generators/html.py",
        "output_generators/html_template.py",
        "output_generators/markdown.py"
      ],
      "can_expand": true
    },
    {
      "name": "Diagram Analysis & Renderer",
      "description": "Refines the structured output into a diagram-specific format (e.g., Mermaid.js syntax) and renders it into visual architectural diagrams.",
      "referenced_source_code": [
        {
          "qualified_name": "diagram_analysis.diagram_generator.DiagramGenerator",
          "reference_file": "diagram_analysis/diagram_generator.py",
          "reference_start_line": null,
          "reference_end_line": null
        }
      ],
      "assigned_files": [
        "diagram_analysis/__init__.py",
        "diagram_analysis/analysis_json.py",
        "diagram_analysis/diagram_generator.py",
        "diagram_analysis/version.py"
      ],
      "can_expand": true
    },
    {
      "name": "Unclassified",
      "description": "Component for all unclassified files and utility functions (Utility functions/External Libraries/Dependencies)",
      "referenced_source_code": [],
      "assigned_files": [
        "vscode_constants.py",
        "vscode_runnable.py",
        "setup.py",
        "github_action.py",
        "demo.py",
        "duckdb_crud.py",
        "logging_config.py",
        "agents/monitoring.py",
        "agents/agent_responses.py",
        "evals/static_analysis_eval.py",
        "evals/end_to_end_eval.py",
        "evals/run_all_evals.py",
        "evals/report_generator.py"
      ],
      "can_expand": false
    },
    {
      "name": "Unclassified",
      "description": "Component for all unclassified files and utility functions (Utility functions/External Libraries/Dependencies)",
      "referenced_source_code": [],
      "assigned_files": [],
      "can_expand": false
    },
    {
      "name": "Unclassified",
      "description": "Component for all unclassified files and utility functions (Utility functions/External Libraries/Dependencies)",
      "referenced_source_code": [],
      "assigned_files": [],
      "can_expand": false
    },
    {
      "name": "Unclassified",
      "description": "Component for all unclassified files and utility functions (Utility functions/External Libraries/Dependencies)",
      "referenced_source_code": [],
      "assigned_files": [],
      "can_expand": false
    },
    {
      "name": "Unclassified",
      "description": "Component for all unclassified files and utility functions (Utility functions/External Libraries/Dependencies)",
      "referenced_source_code": [],
      "assigned_files": [],
      "can_expand": false
    }
  ],
  "components_relations": [
    {
      "relation": "Initiates Analysis Request",
      "src_name": "User Interface / API Gateway",
      "dst_name": "Orchestration Engine (Agent Core)"
    },
    {
      "relation": "Requests Codebase",
      "src_name": "Orchestration Engine (Agent Core)",
      "dst_name": "Repository Manager"
    },
    {
      "relation": "Provides Codebase",
      "src_name": "Repository Manager",
      "dst_name": "Orchestration Engine (Agent Core)"
    },
    {
      "relation": "Submits Codebase for Analysis",
      "src_name": "Orchestration Engine (Agent Core)",
      "dst_name": "Static Analysis Engine"
    },
    {
      "relation": "Returns Static Analysis Results",
      "src_name": "Static Analysis Engine",
      "dst_name": "Orchestration Engine (Agent Core)"
    },
    {
      "relation": "Requests Tailored Prompt",
      "src_name": "Orchestration Engine (Agent Core)",
      "dst_name": "LLM Prompt Factory"
    },
    {
      "relation": "Provides Generated Prompt",
      "src_name": "LLM Prompt Factory",
      "dst_name": "Orchestration Engine (Agent Core)"
    },
    {
      "relation": "Sends Prompt & Context",
      "src_name": "Orchestration Engine (Agent Core)",
      "dst_name": "AI Interpretation Layer"
    },
    {
      "relation": "Returns LLM Interpreted Insights",
      "src_name": "AI Interpretation Layer",
      "dst_name": "Orchestration Engine (Agent Core)"
    },
    {
      "relation": "Processes Insights for Formatting",
      "src_name": "Orchestration Engine (Agent Core)",
      "dst_name": "Output Generation Engine"
    },
    {
      "relation": "Provides Structured Diagram Data",
      "src_name": "Output Generation Engine",
      "dst_name": "Diagram Analysis & Renderer"
    },
    {
      "relation": "Renders & Displays Diagram",
      "src_name": "Diagram Analysis & Renderer",
      "dst_name": "User Interface / API Gateway"
    }
  ]
}

{
  "description": "The system's architecture is centered around an Orchestration Engine that meticulously manages the entire code analysis and documentation generation lifecycle. It initiates a robust Static Analysis Engine, now significantly enhanced with reference resolution capabilities, to produce highly accurate structured code representations. These refined outputs are then channeled to the AI Processing Layer, where specialized agents, including a new `ValidatorAgent`, leverage Large Language Models to derive and validate architectural insights. The validated information subsequently flows to the Output Generation Engine for diverse documentation formatting, culminating in the Diagram Generation Service for intuitive visual representations. This integrated pipeline ensures comprehensive, accurate, and visually accessible architectural documentation.",
  "components": [
    {
      "name": "Orchestration Engine",
      "description": "The central control unit managing the entire code analysis and documentation generation pipeline. It coordinates the execution flow, from static analysis to AI interpretation and final output generation, primarily by delegating to the `CodeBoardingAgent`. It now also integrates the `ValidatorAgent` into its workflow for post-processing validation.",
      "referenced_source_code": [
        {
          "qualified_name": "agents.meta_agent.MetaAgent",
          "reference_file": "agents/meta_agent.py",
          "reference_start_line": null,
          "reference_end_line": null
        },
        {
          "qualified_name": "agents.planner_agent.PlannerAgent",
          "reference_file": "agents/planner_agent.py",
          "reference_start_line": null,
          "reference_end_line": null
        },
        {
          "qualified_name": "agents.agent.CodeBoardingAgent",
          "reference_file": "agents/agent.py",
          "reference_start_line": null,
          "reference_end_line": null
        }
      ],
      "assigned_files": [
        "main.py",
        "local_app.py",
        "github_action.py",
        "agents/planner_agent.py",
        "agents/meta_agent.py",
        "agents/agent.py"
      ],
      "can_expand": true
    },
    {
      "name": "Static Analysis Engine",
      "description": "Responsible for parsing source code, building Abstract Syntax Trees (ASTs), generating Control Flow Graphs (CFGs), and applying adaptive clustering algorithms to abstract these graphs into logical architectural components. It now incorporates a `ReferenceResolveMixin` to significantly enhance its capability to resolve references, providing more accurate, structured, clustered, and filtered code representations.",
      "referenced_source_code": [
        {
          "qualified_name": "static_analyzer",
          "reference_file": "static_analyzer",
          "reference_start_line": null,
          "reference_end_line": null
        },
        {
          "qualified_name": "static_analyzer.graph.Graph",
          "reference_file": "static_analyzer/graph.py",
          "reference_start_line": null,
          "reference_end_line": null
        },
        {
          "qualified_name": "repo_utils/ignore.py",
          "reference_file": "repo_utils/ignore.py",
          "reference_start_line": null,
          "reference_end_line": null
        }
      ],
      "assigned_files": [
        "repo_utils/git_diff.py",
        "repo_utils/ignore.py",
        "static_analyzer/programming_language.py",
        "static_analyzer/__init__.py",
        "static_analyzer/reference_resolve_mixin.py",
        "static_analyzer/graph.py",
        "static_analyzer/analysis_result.py",
        "static_analyzer/scanner.py",
        "static_analyzer/typescript_config_scanner.py",
        "static_analyzer/lsp_client/typescript_client.py",
        "static_analyzer/lsp_client/client.py"
      ],
      "can_expand": true
    },
    {
      "name": "AI Processing Layer",
      "description": "This integrated layer processes structured code data using Large Language Models (LLMs) to derive architectural insights, identify components, and understand relationships. It relies on the `CodeBoardingAgent` for prompt generation, LLM interaction, and response parsing. The newly introduced `ValidatorAgent` within this layer ensures the correctness and quality of processed information.",
      "referenced_source_code": [
        {
          "qualified_name": "agents.abstraction_agent.AbstractionAgent",
          "reference_file": "agents/abstraction_agent.py",
          "reference_start_line": null,
          "reference_end_line": null
        },
        {
          "qualified_name": "agents.details_agent.DetailsAgent",
          "reference_file": "agents/details_agent.py",
          "reference_start_line": null,
          "reference_end_line": null
        },
        {
          "qualified_name": "agents.prompts.prompt_factory.PromptFactory",
          "reference_file": "agents/prompts/prompt_factory.py",
          "reference_start_line": null,
          "reference_end_line": null
        },
        {
          "qualified_name": "agents.llm_config.LLMConfig",
          "reference_file": "agents/llm_config.py",
          "reference_start_line": 14,
          "reference_end_line": 52
        },
        {
          "qualified_name": "agents.validator_agent.ValidatorAgent",
          "reference_file": "agents/validator_agent.py",
          "reference_start_line": null,
          "reference_end_line": null
        }
      ],
      "assigned_files": [
        "agents/llm_config.py",
        "agents/diff_analyzer.py",
        "agents/details_agent.py",
        "agents/validator_agent.py",
        "agents/abstraction_agent.py",
        "agents/agent_responses.py",
        "agents/tools/read_source.py",
        "agents/tools/read_file_structure.py",
        "agents/tools/external_deps.py",
        "agents/tools/base.py",
        "agents/tools/toolkit.py",
        "agents/tools/read_packages.py",
        "agents/tools/read_cfg.py",
        "agents/tools/get_method_invocations.py",
        "agents/tools/read_git_diff.py",
        "agents/tools/read_file.py",
        "agents/tools/read_structure.py",
        "/home/ubuntu/CodeBoarding/repo/CodeBoarding/agents/tools/read_docs.y",
        "agents/prompts/claude_prompts_bidirectional.py",
        "agents/prompts/gpt_prompts_unidirectional.py",
        "agents/prompts/gemini_flash_prompts_bidirectional.py",
        "agents/prompts/abstract_prompt_factory.py",
        "agents/prompts/gpt_prompts_bidirectional.py",
        "agents/prompts/prompt_factory.py",
        "agents/prompts/gemini_flash_prompts_unidirectional.py",
        "agents/prompts/claude_prompts_unidirectional.py"
      ],
      "can_expand": true
    },
    {
      "name": "Output Generation Engine",
      "description": "Takes the structured architectural insights from the AI Processing Layer and formats them into various output types, such as documentation files (Markdown, JSON), reports, or raw data suitable for diagram generation.",
      "referenced_source_code": [
        {
          "qualified_name": "output_generators",
          "reference_file": "output_generators",
          "reference_start_line": null,
          "reference_end_line": null
        }
      ],
      "assigned_files": [
        "output_generators/__init__.py",
        "output_generators/sphinx.py",
        "output_generators/mdx.py",
        "output_generators/html.py",
        "output_generators/html_template.py",
        "output_generators/markdown.py"
      ],
      "can_expand": true
    },
    {
      "name": "Diagram Generation Service",
      "description": "Specializes in converting structured architectural data into visual diagrams, potentially using tools like Mermaid.js. It enhances comprehension by providing interactive and visual representations of the analyzed architecture.",
      "referenced_source_code": [
        {
          "qualified_name": "diagram_analysis",
          "reference_file": "diagram_analysis",
          "reference_start_line": null,
          "reference_end_line": null
        }
      ],
      "assigned_files": [
        "diagram_analysis/__init__.py",
        "diagram_analysis/analysis_json.py",
        "diagram_analysis/diagram_generator.py",
        "diagram_analysis/version.py"
      ],
      "can_expand": true
    },
    {
      "name": "Unclassified",
      "description": "Component for all unclassified files and utility functions (Utility functions/External Libraries/Dependencies)",
      "referenced_source_code": [],
      "assigned_files": [
        "vscode_constants.py",
        "utils.py",
        "setup.py",
        "duckdb_crud.py",
        "logging_config.py",
        "agents/__init__.py",
        "agents/tools/__init__.py",
        "agents/prompts/__init__.py",
        "repo_utils/__init__.py",
        "repo_utils/errors.py",
        "evals/base.py",
        "evals/cli.py",
        "evals/schemas.py",
        "evals/utils.py",
        "evals/config.py",
        "evals/definitions/static_analysis.py",
        "evals/definitions/end_to_end.py",
        "evals/definitions/scalability.py",
        "static_analyzer/lsp_client/__init__.py",
        "monitoring/paths.py",
        "monitoring/__init__.py",
        "monitoring/context.py",
        "monitoring/callbacks.py",
        "monitoring/stats.py",
        "monitoring/mixin.py",
        "monitoring/writers.py"
      ],
      "can_expand": false
    },
    {
      "name": "Unclassified",
      "description": "Component for all unclassified files and utility functions (Utility functions/External Libraries/Dependencies)",
      "referenced_source_code": [],
      "assigned_files": [],
      "can_expand": false
    }
  ],
  "components_relations": [
    {
      "relation": "delegates tasks to",
      "src_name": "Orchestration Engine",
      "dst_name": "Static Analysis Engine"
    },
    {
      "relation": "provides enhanced structured code to",
      "src_name": "Static Analysis Engine",
      "dst_name": "Orchestration Engine"
    },
    {
      "relation": "orchestrates",
      "src_name": "Orchestration Engine",
      "dst_name": "AI Processing Layer"
    },
    {
      "relation": "provides validated architectural insights to",
      "src_name": "AI Processing Layer",
      "dst_name": "Output Generation Engine"
    },
    {
      "relation": "generates diagram data for",
      "src_name": "Output Generation Engine",
      "dst_name": "Diagram Generation Service"
    }
  ]
}

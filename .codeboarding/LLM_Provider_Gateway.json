{
  "description": "The system's architecture is orchestrated by the Application Orchestrator, which manages the end-to-end workflow from processing local or remote repositories to generating final architectural documentation. Central to its operation is the Code Analysis Agent, an intelligent core that leverages an enhanced internal LSP Client for deep static analysis, extracting detailed code structure, call graphs, and class hierarchies. This rich code understanding, combined with insights from External LLM Integrations managed by the LLM Provider Manager, allows the agent to generate comprehensive architectural insights. These insights are then processed by the Analysis & Diagram Generator to produce structured documentation and visual diagrams, completing the analysis cycle under the guidance of the Application Orchestrator.",
  "components": [
    {
      "name": "Application Orchestrator",
      "description": "Manages the overall application lifecycle, handling user input, repository setup, and coordinating the analysis and documentation generation. It oversees the end-to-end workflow.",
      "referenced_source_code": [
        {
          "qualified_name": "ApplicationOrchestrator",
          "reference_file": "ApplicationOrchestrator",
          "reference_start_line": null,
          "reference_end_line": null
        }
      ],
      "assigned_files": [],
      "can_expand": true
    },
    {
      "name": "Code Analysis Agent",
      "description": "Responsible for in-depth code understanding, performing detailed static analysis using its internal LSP Client, formulating prompts for external LLMs, and generating architectural insights.",
      "referenced_source_code": [
        {
          "qualified_name": "CodeAnalysisAgent",
          "reference_file": "CodeAnalysisAgent",
          "reference_start_line": null,
          "reference_end_line": null
        }
      ],
      "assigned_files": [
        "../../agents/prompts/claude_prompts_bidirectional.py",
        "../../agents/prompts/gpt_prompts_unidirectional.py",
        "../../agents/prompts/gemini_flash_prompts_bidirectional.py",
        "../../agents/prompts/gpt_prompts_bidirectional.py",
        "../../agents/prompts/gemini_flash_prompts_unidirectional.py",
        "../../agents/prompts/claude_prompts_unidirectional.py"
      ],
      "can_expand": true
    },
    {
      "name": "Analysis & Diagram Generator",
      "description": "Takes comprehensive analysis results from the Code Analysis Agent and transforms them into structured documentation and visual diagrams.",
      "referenced_source_code": [
        {
          "qualified_name": "AnalysisDiagramGenerator",
          "reference_file": "AnalysisDiagramGenerator",
          "reference_start_line": null,
          "reference_end_line": null
        }
      ],
      "assigned_files": [],
      "can_expand": false
    },
    {
      "name": "LLM Provider Manager",
      "description": "Dynamically selects and configures the appropriate External LLM Integration based on the Code Analysis Agent's needs.",
      "referenced_source_code": [
        {
          "qualified_name": "LLMProviderManager",
          "reference_file": "LLMProviderManager",
          "reference_start_line": null,
          "reference_end_line": null
        }
      ],
      "assigned_files": [],
      "can_expand": true
    },
    {
      "name": "External LLM Integrations",
      "description": "Represents the various external Large Language Models (e.g., OpenAI, Anthropic, Google Gemini) that the Code Analysis Agent interacts with to send prompts and receive responses.",
      "referenced_source_code": [
        {
          "qualified_name": "ExternalLLMIntegration",
          "reference_file": "ExternalLLMIntegration",
          "reference_start_line": null,
          "reference_end_line": null
        }
      ],
      "assigned_files": [],
      "can_expand": true
    },
    {
      "name": "Unclassified",
      "description": "Component for all unclassified files and utility functions (Utility functions/External Libraries/Dependencies)",
      "referenced_source_code": [],
      "assigned_files": [],
      "can_expand": false
    }
  ],
  "components_relations": [
    {
      "relation": "initiates analysis workflow with",
      "src_name": "Application Orchestrator",
      "dst_name": "Code Analysis Agent"
    },
    {
      "relation": "manages output of",
      "src_name": "Application Orchestrator",
      "dst_name": "Analysis & Diagram Generator"
    },
    {
      "relation": "requests LLM client from",
      "src_name": "Code Analysis Agent",
      "dst_name": "LLM Provider Manager"
    },
    {
      "relation": "instantiates and configures LLM client for",
      "src_name": "LLM Provider Manager",
      "dst_name": "External LLM Integrations"
    },
    {
      "relation": "sends prompts and receives responses from",
      "src_name": "Code Analysis Agent",
      "dst_name": "External LLM Integrations"
    },
    {
      "relation": "provides analysis results to",
      "src_name": "Code Analysis Agent",
      "dst_name": "Analysis & Diagram Generator"
    },
    {
      "relation": "returns generated documentation and diagrams to",
      "src_name": "Analysis & Diagram Generator",
      "dst_name": "Application Orchestrator"
    }
  ]
}

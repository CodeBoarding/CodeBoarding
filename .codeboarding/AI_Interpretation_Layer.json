{
  "description": "The system's architecture is centered around a hierarchy of AI agents designed for comprehensive code analysis. The MetaAgent orchestrates the overall analysis workflow, delegating tasks to the PlannerAgent which strategizes the execution sequence. Specialized Analysis Agents (AbstractionAgent, DetailsAgent, ValidatorAgent) perform the core AI-driven analysis, leveraging the CodebaseAccessTools for programmatic access to codebase information, including source code and CFGs. This access is significantly powered by an enhanced Language Server Protocol (LSP) client, improving the precision and scope of code interpretation. The DiffAnalyzer provides targeted input by analyzing code changes, while the PromptFactory dynamically generates prompts for various LLMs. Finally, AgentResponses processes and transforms raw LLM outputs into actionable architectural insights. This structure ensures a modular, extensible, and intelligent approach to code understanding and architectural analysis.",
  "components": [
    {
      "name": "Agent",
      "description": "The foundational component, defining the base interface and common functionalities for all specialized agents, acting as the core orchestrator for individual AI-driven analysis tasks.",
      "referenced_source_code": [
        {
          "qualified_name": "Agent",
          "reference_file": "agents/agent.py",
          "reference_start_line": null,
          "reference_end_line": null
        }
      ],
      "assigned_files": [
        "../../agents/agent.py"
      ],
      "can_expand": true
    },
    {
      "name": "MetaAgent",
      "description": "Responsible for higher-level orchestration and coordination of multiple specialized agents, guiding the overall analysis workflow. It acts as the primary entry point for initiating complex analysis tasks.",
      "referenced_source_code": [
        {
          "qualified_name": "MetaAgent",
          "reference_file": "agents/meta_agent.py",
          "reference_start_line": null,
          "reference_end_line": null
        }
      ],
      "assigned_files": [
        "../../agents/meta_agent.py"
      ],
      "can_expand": true
    },
    {
      "name": "PlannerAgent",
      "description": "Determines the strategic sequence of analysis steps and the specific agents to be invoked based on the analysis goals, effectively creating an execution plan.",
      "referenced_source_code": [
        {
          "qualified_name": "PlannerAgent",
          "reference_file": "agents/planner_agent.py",
          "reference_start_line": null,
          "reference_end_line": null
        }
      ],
      "assigned_files": [
        "../../agents/planner_agent.py"
      ],
      "can_expand": true
    },
    {
      "name": "Specialized Analysis Agents",
      "description": "A group of agents (AbstractionAgent, DetailsAgent, ValidatorAgent) that perform specific AI-driven analysis tasks: identifying high-level architectural concepts, delving into granular code details, and verifying insights against architectural principles.",
      "referenced_source_code": [
        {
          "qualified_name": "AbstractionAgent",
          "reference_file": "agents/abstraction_agent.py",
          "reference_start_line": null,
          "reference_end_line": null
        },
        {
          "qualified_name": "DetailsAgent",
          "reference_file": "agents/details_agent.py",
          "reference_start_line": null,
          "reference_end_line": null
        },
        {
          "qualified_name": "ValidatorAgent",
          "reference_file": "agents/validator_agent.py",
          "reference_start_line": null,
          "reference_end_line": null
        }
      ],
      "assigned_files": [
        "../../agents/details_agent.py",
        "../../agents/validator_agent.py",
        "../../agents/abstraction_agent.py"
      ],
      "can_expand": true
    },
    {
      "name": "DiffAnalyzer",
      "description": "Analyzes code differences (e.g., from Git commits) to provide targeted input for agents, enabling incremental analysis and integration with CI/CD pipelines.",
      "referenced_source_code": [
        {
          "qualified_name": "DiffAnalyzer",
          "reference_file": "agents/diff_analyzer.py",
          "reference_start_line": null,
          "reference_end_line": null
        }
      ],
      "assigned_files": [
        "../../agents/diff_analyzer.py"
      ],
      "can_expand": true
    },
    {
      "name": "PromptFactory",
      "description": "Manages the dynamic generation and selection of appropriate prompts for interacting with various Large Language Models (LLMs), adapting to different LLM providers and analysis contexts.",
      "referenced_source_code": [
        {
          "qualified_name": "PromptFactory",
          "reference_file": "agents/prompts/prompt_factory.py",
          "reference_start_line": null,
          "reference_end_line": null
        }
      ],
      "assigned_files": [],
      "can_expand": true
    },
    {
      "name": "CodebaseAccessTools",
      "description": "Provides agents with the capability to programmatically access and interpret different aspects of the codebase, including source code, Control Flow Graphs, and file structures. This component has been significantly enhanced with an updated Language Server Protocol (LSP) client (`static_analyzer/lsp_client/client.py`), which is crucial for its ability to programmatically access and interpret codebase information, leading to improved performance, accuracy, or expanded capabilities in code analysis.",
      "referenced_source_code": [
        {
          "qualified_name": "read_source",
          "reference_file": "agents/tools/read_source.py",
          "reference_start_line": null,
          "reference_end_line": null
        },
        {
          "qualified_name": "read_cfg",
          "reference_file": "agents/tools/read_cfg.py",
          "reference_start_line": null,
          "reference_end_line": null
        },
        {
          "qualified_name": "read_file_structure",
          "reference_file": "agents/tools/read_file_structure.py",
          "reference_start_line": null,
          "reference_end_line": null
        },
        {
          "qualified_name": "static_analyzer/lsp_client/client.py",
          "reference_file": "static_analyzer/lsp_client/client.py",
          "reference_start_line": null,
          "reference_end_line": null
        }
      ],
      "assigned_files": [
        "../../agents/tools/read_source.py",
        "../../agents/tools/read_file_structure.py",
        "../../agents/tools/read_packages.py",
        "../../agents/tools/read_cfg.py",
        "../../agents/tools/get_method_invocations.py",
        "../../agents/tools/read_git_diff.py",
        "../../agents/tools/read_file.py",
        "../../agents/tools/read_structure.py",
        "../../agents/tools/read_docs.py"
      ],
      "can_expand": true
    },
    {
      "name": "AgentResponses",
      "description": "Handles the structured parsing, interpretation, and transformation of raw LLM outputs into actionable architectural insights or data structures.",
      "referenced_source_code": [
        {
          "qualified_name": "AgentResponses",
          "reference_file": "agents/agent_responses.py",
          "reference_start_line": null,
          "reference_end_line": null
        }
      ],
      "assigned_files": [
        "../../agents/agent_responses.py"
      ],
      "can_expand": true
    },
    {
      "name": "Unclassified",
      "description": "Component for all unclassified files and utility functions (Utility functions/External Libraries/Dependencies)",
      "referenced_source_code": [],
      "assigned_files": [
        "../../agents/__init__.py",
        "../../agents/tools/__init__.py",
        "../../agents/tools/external_deps.py"
      ],
      "can_expand": false
    }
  ],
  "components_relations": [
    {
      "relation": "orchestrates",
      "src_name": "MetaAgent",
      "dst_name": "PlannerAgent"
    },
    {
      "relation": "orchestrates",
      "src_name": "MetaAgent",
      "dst_name": "Specialized Analysis Agents"
    },
    {
      "relation": "plans execution for",
      "src_name": "PlannerAgent",
      "dst_name": "Specialized Analysis Agents"
    },
    {
      "relation": "receives guidance from",
      "src_name": "PlannerAgent",
      "dst_name": "MetaAgent"
    },
    {
      "relation": "utilizes",
      "src_name": "Specialized Analysis Agents",
      "dst_name": "CodebaseAccessTools"
    },
    {
      "relation": "interacts with",
      "src_name": "Specialized Analysis Agents",
      "dst_name": "PromptFactory"
    },
    {
      "relation": "sends responses to",
      "src_name": "Specialized Analysis Agents",
      "dst_name": "AgentResponses"
    },
    {
      "relation": "receives input from",
      "src_name": "Specialized Analysis Agents",
      "dst_name": "DiffAnalyzer"
    },
    {
      "relation": "provides input to",
      "src_name": "DiffAnalyzer",
      "dst_name": "Specialized Analysis Agents"
    },
    {
      "relation": "utilizes",
      "src_name": "DiffAnalyzer",
      "dst_name": "CodebaseAccessTools"
    },
    {
      "relation": "provides prompts to",
      "src_name": "PromptFactory",
      "dst_name": "Specialized Analysis Agents"
    },
    {
      "relation": "provides code data to",
      "src_name": "CodebaseAccessTools",
      "dst_name": "Specialized Analysis Agents"
    },
    {
      "relation": "provides code data to",
      "src_name": "CodebaseAccessTools",
      "dst_name": "DiffAnalyzer"
    },
    {
      "relation": "receives raw output from",
      "src_name": "AgentResponses",
      "dst_name": "Specialized Analysis Agents"
    },
    {
      "relation": "inherits from",
      "src_name": "MetaAgent",
      "dst_name": "Agent"
    },
    {
      "relation": "inherits from",
      "src_name": "PlannerAgent",
      "dst_name": "Agent"
    },
    {
      "relation": "inherits from",
      "src_name": "Specialized Analysis Agents",
      "dst_name": "Agent"
    },
    {
      "relation": "inherits from",
      "src_name": "DiffAnalyzer",
      "dst_name": "Agent"
    }
  ]
}

{
  "description": "The system orchestrates the generation of documentation and diagrams through a well-defined workflow. The Orchestration Engine serves as the central control, initiating and managing all jobs. It interacts with the Job Database to track job statuses and with the Repository Manager to retrieve necessary code. The core analysis is performed by the Analysis Layer, which conducts static code analysis, AI-driven interpretation, and extracts data for diagram generation. A key enhancement within the Analysis Layer is its formalized prompt management system, utilizing an abstract factory pattern for structured and scalable AI prompt generation. Upon completion of the analysis, the Orchestration Engine directs the Output Generation Engine to format and produce the final documentation and diagrams. External systems can seamlessly trigger this entire process via External Integrations. The system's architecture is centered around an Orchestration Engine that governs the end-to-end process of documentation and diagram generation. This engine coordinates with a Job Database for job lifecycle management and a Repository Manager for source code acquisition. The Analysis Layer is the intellectual core, performing detailed code analysis, including AI-driven interpretation facilitated by a newly formalized and extensible prompt management system. The results from the Analysis Layer are then channeled back to the Orchestration Engine, which subsequently instructs the Output Generation Engine to produce the final documentation and diagrams. The entire workflow can be initiated by external systems through External Integrations, ensuring broad applicability and ease of use.",
  "components": [
    {
      "name": "Orchestration Engine",
      "description": "The central control subsystem responsible for initiating, managing, and coordinating all analysis and documentation generation jobs, acting as the primary orchestrator for the end-to-end workflow.",
      "referenced_source_code": [
        {
          "qualified_name": "local_app.py:start_generation_job",
          "reference_file": "local_app.py",
          "reference_start_line": null,
          "reference_end_line": null
        },
        {
          "qualified_name": "local_app.py:start_docs_generation_job",
          "reference_file": "local_app.py",
          "reference_start_line": null,
          "reference_end_line": null
        },
        {
          "qualified_name": "local_app.py:process_docs_generation_job",
          "reference_file": "local_app.py",
          "reference_start_line": null,
          "reference_end_line": null
        }
      ]
    },
    {
      "name": "Job Database",
      "description": "Manages the storage and retrieval of job details, including status updates, for the documentation generation pipeline.",
      "referenced_source_code": [
        {
          "qualified_name": "duckdb_crud.py",
          "reference_file": "duckdb_crud.py",
          "reference_start_line": null,
          "reference_end_line": null
        }
      ]
    },
    {
      "name": "Repository Manager",
      "description": "Handles repository operations suchs as cloning code repositories and retrieving code differences for analysis.",
      "referenced_source_code": [
        {
          "qualified_name": "repo_utils.git_diff.py",
          "reference_file": "repo_utils/git_diff.py",
          "reference_start_line": null,
          "reference_end_line": null
        }
      ]
    },
    {
      "name": "Analysis Layer",
      "description": "Performs comprehensive code analysis, encompassing static code analysis, AI-driven interpretation, and specialized data extraction for diagram generation. This layer now incorporates a formalized and extensible prompt management system, leveraging an abstract factory pattern to generate and manage AI prompts, thereby enhancing modularity and scalability.",
      "referenced_source_code": [
        {
          "qualified_name": "static_analyzer.scanner.py",
          "reference_file": "static_analyzer/scanner.py",
          "reference_start_line": null,
          "reference_end_line": null
        },
        {
          "qualified_name": "agents.agent.py",
          "reference_file": "agents/agent.py",
          "reference_start_line": null,
          "reference_end_line": null
        },
        {
          "qualified_name": "diagram_analysis/diagram_generator.py:generate_analysis",
          "reference_file": "diagram_analysis/diagram_generator.py",
          "reference_start_line": null,
          "reference_end_line": null
        },
        {
          "qualified_name": "agents.prompts.abstract_prompt_factory.py",
          "reference_file": "agents/prompts/abstract_prompt_factory.py",
          "reference_start_line": null,
          "reference_end_line": null
        },
        {
          "qualified_name": "agents.prompts.prompt_factory.py",
          "reference_file": "agents/prompts/prompt_factory.py",
          "reference_start_line": null,
          "reference_end_line": null
        },
        {
          "qualified_name": "agents.prompts.gemini_flash_prompts_bidirectional.py",
          "reference_file": "agents/prompts/gemini_flash_prompts_bidirectional.py",
          "reference_start_line": null,
          "reference_end_line": null
        },
        {
          "qualified_name": "agents.prompts.gemini_flash_prompts_unidirectional.py",
          "reference_file": "agents/prompts/gemini_flash_prompts_unidirectional.py",
          "reference_start_line": null,
          "reference_end_line": null
        }
      ]
    },
    {
      "name": "Output Generation Engine",
      "description": "Responsible for the final formatting and generation of documentation and diagrams in various formats.",
      "referenced_source_code": [
        {
          "qualified_name": "output_generators.markdown.py",
          "reference_file": "output_generators/markdown.py",
          "reference_start_line": null,
          "reference_end_line": null
        }
      ]
    },
    {
      "name": "External Integrations",
      "description": "Provides interfaces for external systems, such as VSCode and GitHub Actions, to trigger analysis workflows.",
      "referenced_source_code": [
        {
          "qualified_name": "github_action.py",
          "reference_file": "github_action.py",
          "reference_start_line": null,
          "reference_end_line": null
        },
        {
          "qualified_name": "vscode_runnable.py",
          "reference_file": "vscode_runnable.py",
          "reference_start_line": null,
          "reference_end_line": null
        }
      ]
    },
    {
      "name": "Unclassified",
      "description": "Component for all unclassified files and utility functions (Utility functions/External Libraries/Dependencies)",
      "referenced_source_code": []
    }
  ],
  "components_relations": [
    {
      "relation": "triggers",
      "src_name": "External Integrations",
      "dst_name": "Orchestration Engine"
    },
    {
      "relation": "manages job status with",
      "src_name": "Orchestration Engine",
      "dst_name": "Job Database"
    },
    {
      "relation": "retrieves code via",
      "src_name": "Orchestration Engine",
      "dst_name": "Repository Manager"
    },
    {
      "relation": "initiates analysis in",
      "src_name": "Orchestration Engine",
      "dst_name": "Analysis Layer"
    },
    {
      "relation": "provides analysis results to",
      "src_name": "Analysis Layer",
      "dst_name": "Orchestration Engine"
    },
    {
      "relation": "directs output generation to",
      "src_name": "Orchestration Engine",
      "dst_name": "Output Generation Engine"
    }
  ]
}
